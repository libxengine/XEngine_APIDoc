<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>OPenSsl_Server_InitEx</title>
<meta name="GENERATOR" content="WinCHM">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style>
html,body { 
	/* Default Font */
	font-family: Arial, Helvetica, sans-serif;
	font-size: 11pt;
}
</style>

</head>

<body>
<H1>函数</H1>
<P >
 OPenSsl_Server_InitEx</P>
<H1 >
  功能</H1>

<P>初始化SSL上下文环境</P> 
 <H1>             语法</H1>
<P>XHANDLE OPenSsl_Server_InitEx(LPCSTR lpszCACert, LPCSTR 
lpszServerCert, LPCSTR lpszServerKey, BOOL bVerPeer = FALSE, BOOL bSSocket = 
TRUE, ENUM_XENGINE_OPENSSL_PROTOCOL enProtocol = 
XENGINE_OPENSSL_PROTOCOL_SSL_SERVER, DWORD dwCoderType = 
XENGINE_OPENSSL_OPENSSL_PEM_FILE)</P>
<P></P>
<P></P>
<H1>参数</H1>
<P>&nbsp;参数.一：lpszCACert<BR>&nbsp; In/Out：In<BR>&nbsp; 
类型：常量字符指针<BR>&nbsp; 可空：N<BR>&nbsp; 
意思：CA签名的证书,此参数可以输入NULL<BR>&nbsp;参数.二：lpszServerCert<BR>&nbsp; 
In/Out：In<BR>&nbsp; 类型：常量字符指针<BR>&nbsp; 可空：N<BR>&nbsp; 
意思：服务端证书,此参数为NULL那么参数一的意思表示使用证书链<BR>&nbsp;参数.三：lpszServerKey<BR>&nbsp; 
In/Out：In<BR>&nbsp; 类型：常量字符指针<BR>&nbsp; 可空：N<BR>&nbsp; 
意思：服务器端私钥<BR>&nbsp;参数.四：enProtocol<BR>&nbsp; In/Out：In<BR>&nbsp; 
类型：枚举型<BR>&nbsp; 可空：Y<BR>&nbsp; 
意思：默认支持SSL_V2和V3版本自动切换。枚举型里面的成员，协议类型<BR>&nbsp;参数.五：dwCoderType<BR>&nbsp; 
In/Out：In<BR>&nbsp; 类型：双字<BR>&nbsp; 可空：Y<BR>&nbsp; 
意思：编码类型，默认PEM编码<BR>&nbsp;参数.六：bVerPeer<BR>&nbsp; In/Out：In<BR>&nbsp; 
类型：逻辑型<BR>&nbsp; 可空：Y<BR>&nbsp; 意思：强制客户端使用证书,默认不需要</P>
<P></P>
<H1>返回值</H1>
<P>类型：逻辑型<BR>意思：是否初始化成功</P>
<H1>备注</H1>
<P>启用这个服务器，你可以使用安全的传输模式，你发送和接受到的数据都是明文，底层我们已经为你做好了加解密工作</P>
<H1>示例</H1>
<DIV 
style="FONT-SIZE: 12px; FONT-FAMILY: Consolas, 'Courier New', monospace; WHITE-SPACE: pre; FONT-WEIGHT: normal; COLOR: #000000; LINE-HEIGHT: 16px; BACKGROUND-COLOR: #fffffe">
<DIV><SPAN style="COLOR: #0000ff">#ifdef</SPAN><SPAN style="COLOR: #000000"> 
_WINDOWS</SPAN></DIV>
<DIV><SPAN style="COLOR: #0000ff">#include</SPAN><SPAN style="COLOR: #000000"> 
</SPAN><SPAN style="COLOR: #0000ff">&lt;</SPAN><SPAN 
style="COLOR: #a31515">stdio.h</SPAN><SPAN 
style="COLOR: #0000ff">&gt;</SPAN></DIV>
<DIV><SPAN style="COLOR: #0000ff">#include</SPAN><SPAN style="COLOR: #000000"> 
</SPAN><SPAN style="COLOR: #0000ff">&lt;</SPAN><SPAN 
style="COLOR: #a31515">Windows.h</SPAN><SPAN 
style="COLOR: #0000ff">&gt;</SPAN></DIV>
<DIV><SPAN style="COLOR: #0000ff">#include</SPAN><SPAN style="COLOR: #000000"> 
</SPAN><SPAN style="COLOR: #0000ff">&lt;</SPAN><SPAN 
style="COLOR: #a31515">tchar.h</SPAN><SPAN 
style="COLOR: #0000ff">&gt;</SPAN></DIV>
<DIV><SPAN style="COLOR: #0000ff">#include</SPAN><SPAN style="COLOR: #000000"> 
</SPAN><SPAN style="COLOR: #0000ff">&lt;</SPAN><SPAN 
style="COLOR: #a31515">locale.h</SPAN><SPAN 
style="COLOR: #0000ff">&gt;</SPAN></DIV>
<DIV><SPAN style="COLOR: #0000ff">#pragma</SPAN><SPAN style="COLOR: #000000"> 
comment(lib,</SPAN><SPAN style="COLOR: #a31515">"Ws2_32.lib"</SPAN><SPAN 
style="COLOR: #000000">)</SPAN></DIV>
<DIV><SPAN style="COLOR: #0000ff">#pragma</SPAN><SPAN style="COLOR: #000000"> 
comment(lib,</SPAN><SPAN 
style="COLOR: #a31515">"../../../XEngine/XEngine_SourceCode/Debug/XEngine_BaseLib.lib"</SPAN><SPAN 
style="COLOR: #000000">)</SPAN></DIV>
<DIV><SPAN style="COLOR: #0000ff">#pragma</SPAN><SPAN style="COLOR: #000000"> 
comment(lib,</SPAN><SPAN 
style="COLOR: #a31515">"../../../XEngine/XEngine_SourceCode/Debug/XEngine_Core.lib"</SPAN><SPAN 
style="COLOR: #000000">)</SPAN></DIV>
<DIV><SPAN style="COLOR: #0000ff">#pragma</SPAN><SPAN style="COLOR: #000000"> 
comment(lib,</SPAN><SPAN 
style="COLOR: #a31515">"../../../XEngine/XEngine_SourceCode/Debug/XEngine_OPenSsl.lib"</SPAN><SPAN 
style="COLOR: #000000">)</SPAN></DIV>
<DIV><SPAN style="COLOR: #0000ff">#else</SPAN></DIV>
<DIV><SPAN style="COLOR: #0000ff">#include</SPAN><SPAN style="COLOR: #000000"> 
</SPAN><SPAN style="COLOR: #0000ff">&lt;</SPAN><SPAN 
style="COLOR: #a31515">sys/socket.h</SPAN><SPAN 
style="COLOR: #0000ff">&gt;</SPAN></DIV>
<DIV><SPAN style="COLOR: #0000ff">#endif</SPAN></DIV>
<DIV><SPAN style="COLOR: #0000ff">#include</SPAN><SPAN style="COLOR: #000000"> 
</SPAN><SPAN style="COLOR: #0000ff">&lt;</SPAN><SPAN 
style="COLOR: #a31515">stdio.h</SPAN><SPAN 
style="COLOR: #0000ff">&gt;</SPAN></DIV>
<DIV><SPAN style="COLOR: #0000ff">#include</SPAN><SPAN style="COLOR: #000000"> 
</SPAN><SPAN style="COLOR: #0000ff">&lt;</SPAN><SPAN 
style="COLOR: #a31515">stdlib.h</SPAN><SPAN 
style="COLOR: #0000ff">&gt;</SPAN></DIV>
<DIV><SPAN style="COLOR: #0000ff">#include</SPAN><SPAN style="COLOR: #000000"> 
</SPAN><SPAN style="COLOR: #0000ff">&lt;</SPAN><SPAN 
style="COLOR: #a31515">string.h</SPAN><SPAN 
style="COLOR: #0000ff">&gt;</SPAN></DIV>
<DIV><SPAN style="COLOR: #0000ff">#include</SPAN><SPAN style="COLOR: #000000"> 
</SPAN><SPAN style="COLOR: #0000ff">&lt;</SPAN><SPAN 
style="COLOR: #a31515">thread</SPAN><SPAN 
style="COLOR: #0000ff">&gt;</SPAN></DIV>
<DIV><SPAN style="COLOR: #0000ff">using</SPAN><SPAN style="COLOR: #000000"> 
</SPAN><SPAN style="COLOR: #0000ff">namespace</SPAN><SPAN 
style="COLOR: #000000"> std;</SPAN></DIV>
<DIV><SPAN style="COLOR: #0000ff">#include</SPAN><SPAN style="COLOR: #000000"> 
</SPAN><SPAN style="COLOR: #0000ff">"</SPAN><SPAN 
style="COLOR: #a31515">../../../XEngine/XEngine_SourceCode/XEngine_CommHdr.h</SPAN><SPAN 
style="COLOR: #0000ff">"</SPAN></DIV>
<DIV><SPAN style="COLOR: #0000ff">#include</SPAN><SPAN style="COLOR: #000000"> 
</SPAN><SPAN style="COLOR: #0000ff">"</SPAN><SPAN 
style="COLOR: #a31515">../../../XEngine/XEngine_SourceCode/XEngine_Types.h</SPAN><SPAN 
style="COLOR: #0000ff">"</SPAN></DIV>
<DIV><SPAN style="COLOR: #0000ff">#include</SPAN><SPAN style="COLOR: #000000"> 
</SPAN><SPAN style="COLOR: #0000ff">"</SPAN><SPAN 
style="COLOR: #a31515">../../../XEngine/XEngine_SourceCode/XEngine_ProtocolHdr.h</SPAN><SPAN 
style="COLOR: #0000ff">"</SPAN></DIV>
<DIV><SPAN style="COLOR: #0000ff">#include</SPAN><SPAN style="COLOR: #000000"> 
</SPAN><SPAN style="COLOR: #0000ff">"</SPAN><SPAN 
style="COLOR: #a31515">../../../XEngine/XEngine_SourceCode/XEngine_BaseLib/XEngine_BaseLib/BaseLib_Define.h</SPAN><SPAN 
style="COLOR: #0000ff">"</SPAN></DIV>
<DIV><SPAN style="COLOR: #0000ff">#include</SPAN><SPAN style="COLOR: #000000"> 
</SPAN><SPAN style="COLOR: #0000ff">"</SPAN><SPAN 
style="COLOR: #a31515">../../../XEngine/XEngine_SourceCode/XEngine_BaseLib/XEngine_BaseLib/BaseLib_Error.h</SPAN><SPAN 
style="COLOR: #0000ff">"</SPAN></DIV>
<DIV><SPAN style="COLOR: #0000ff">#include</SPAN><SPAN style="COLOR: #000000"> 
</SPAN><SPAN style="COLOR: #0000ff">"</SPAN><SPAN 
style="COLOR: #a31515">../../../XEngine/XEngine_SourceCode/XEngine_Core/XEngine_Core/NetCore_Define.h</SPAN><SPAN 
style="COLOR: #0000ff">"</SPAN></DIV>
<DIV><SPAN style="COLOR: #0000ff">#include</SPAN><SPAN style="COLOR: #000000"> 
</SPAN><SPAN style="COLOR: #0000ff">"</SPAN><SPAN 
style="COLOR: #a31515">../../../XEngine/XEngine_SourceCode/XEngine_Core/XEngine_Core/NetCore_Error.h</SPAN><SPAN 
style="COLOR: #0000ff">"</SPAN></DIV>
<DIV><SPAN style="COLOR: #0000ff">#include</SPAN><SPAN style="COLOR: #000000"> 
</SPAN><SPAN style="COLOR: #0000ff">"</SPAN><SPAN 
style="COLOR: #a31515">../../../XEngine/XEngine_SourceCode/XEngine_Core/XEngine_OPenSsl/OPenSsl_Define.h</SPAN><SPAN 
style="COLOR: #0000ff">"</SPAN></DIV>
<DIV><SPAN style="COLOR: #0000ff">#include</SPAN><SPAN style="COLOR: #000000"> 
</SPAN><SPAN style="COLOR: #0000ff">"</SPAN><SPAN 
style="COLOR: #a31515">../../../XEngine/XEngine_SourceCode/XEngine_Core/XEngine_OPenSsl/OPenSsl_Error.h</SPAN><SPAN 
style="COLOR: #0000ff">"</SPAN></DIV><BR>
<DIV><SPAN style="COLOR: #008000">//Linux::g++ -std=gnu++17 -Wall -g 
XCore_APPSsl.cpp -o XCore_APPSsl.exe -L 
../../../XEngine/XEngine_Release/XEngine_Linux/Ubuntu/XEngine_BaseLib -L 
../../../XEngine/XEngine_Release/XEngine_Linux/Ubuntu/XEngine_Core 
-lXEngine_BaseLib -lXEngine_Core -lXEngine_OPenSsl 
-Wl,-rpath=../../../XEngine/XEngine_Release/XEngine_Linux/Ubuntu/XEngine_BaseLib:../../../XEngine/XEngine_Release/XEngine_Linux/Ubuntu/XEngine_Core,--disable-new-dtags</SPAN></DIV>
<DIV><SPAN style="COLOR: #008000">//Macos::g++ -std=gnu++17 -Wall -g 
XCore_APPSsl.cpp -o XCore_APPSsl.exe -L 
../../../XEngine/XEngine_Release/XEngine_Mac/XEngine_BaseLib -L 
../../../XEngine/XEngine_Release/XEngine_Mac/XEngine_Core -lXEngine_BaseLib 
-lXEngine_Core -lXEngine_OPenSsl</SPAN></DIV><BR>
<DIV><SPAN style="COLOR: #000000">XHANDLE xhSSL = NULL;</SPAN></DIV>
<DIV><SPAN style="COLOR: #000000">BOOL CALLBACK TCPSelect_CBLogin(LPCSTR 
lpszClientAddr, SOCKET hSocket, LPVOID lParam)</SPAN></DIV>
<DIV><SPAN style="COLOR: #000000">{</SPAN></DIV>
<DIV><SPAN style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;printf(</SPAN><SPAN 
style="COLOR: #a31515">"recv_Login:%s\n"</SPAN><SPAN style="COLOR: #000000">, 
lpszClientAddr);</SPAN></DIV>
<DIV><SPAN style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;TCHAR 
tszSubject[</SPAN><SPAN style="COLOR: #09885a">2048</SPAN><SPAN 
style="COLOR: #000000">];</SPAN></DIV>
<DIV><SPAN style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;TCHAR 
tszIssus[</SPAN><SPAN style="COLOR: #09885a">2048</SPAN><SPAN 
style="COLOR: #000000">];</SPAN></DIV>
<DIV><SPAN style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;TCHAR 
tszAlg[</SPAN><SPAN style="COLOR: #09885a">2048</SPAN><SPAN 
style="COLOR: #000000">];</SPAN></DIV><BR>
<DIV><SPAN style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;memset(tszSubject, 
</SPAN><SPAN style="COLOR: #a31515">'</SPAN><SPAN 
style="COLOR: #000000">\</SPAN><SPAN style="COLOR: #09885a">0</SPAN><SPAN 
style="COLOR: #a31515">'</SPAN><SPAN style="COLOR: #000000">, </SPAN><SPAN 
style="COLOR: #0000ff">sizeof</SPAN><SPAN 
style="COLOR: #000000">(tszSubject));</SPAN></DIV>
<DIV><SPAN style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;memset(tszIssus, 
</SPAN><SPAN style="COLOR: #a31515">'</SPAN><SPAN 
style="COLOR: #000000">\</SPAN><SPAN style="COLOR: #09885a">0</SPAN><SPAN 
style="COLOR: #a31515">'</SPAN><SPAN style="COLOR: #000000">, </SPAN><SPAN 
style="COLOR: #0000ff">sizeof</SPAN><SPAN 
style="COLOR: #000000">(tszIssus));</SPAN></DIV>
<DIV><SPAN style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;memset(tszAlg, 
</SPAN><SPAN style="COLOR: #a31515">'</SPAN><SPAN 
style="COLOR: #000000">\</SPAN><SPAN style="COLOR: #09885a">0</SPAN><SPAN 
style="COLOR: #a31515">'</SPAN><SPAN style="COLOR: #000000">, </SPAN><SPAN 
style="COLOR: #0000ff">sizeof</SPAN><SPAN 
style="COLOR: #000000">(tszAlg));</SPAN></DIV><BR>
<DIV><SPAN 
style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;OPenSsl_Server_AcceptEx(xhSSL, 
hSocket, lpszClientAddr, tszSubject, tszIssus, tszAlg);</SPAN></DIV>
<DIV><SPAN style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;printf(</SPAN><SPAN 
style="COLOR: #a31515">"TCPSelect_CBLogin:%s %s %s\n"</SPAN><SPAN 
style="COLOR: #000000">, tszSubject, tszIssus, tszAlg);</SPAN></DIV>
<DIV><SPAN style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN 
style="COLOR: #0000ff">return</SPAN><SPAN style="COLOR: #000000"> 
TRUE;</SPAN></DIV>
<DIV><SPAN style="COLOR: #000000">}</SPAN></DIV>
<DIV><SPAN style="COLOR: #0000ff">void</SPAN><SPAN style="COLOR: #000000"> 
CALLBACK TCPSelect_CBRecv(LPCSTR lpszClientAddr, SOCKET hSocket, LPCSTR 
lpszRecvMsg, </SPAN><SPAN style="COLOR: #0000ff">int</SPAN><SPAN 
style="COLOR: #000000"> nMsgLen, LPVOID lParam)</SPAN></DIV>
<DIV><SPAN style="COLOR: #000000">{</SPAN></DIV>
<DIV><SPAN style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN 
style="COLOR: #0000ff">int</SPAN><SPAN style="COLOR: #000000"> nLen = 
</SPAN><SPAN style="COLOR: #09885a">2048</SPAN><SPAN 
style="COLOR: #000000">;</SPAN></DIV>
<DIV><SPAN style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;TCHAR 
tszMsgBuffer[</SPAN><SPAN style="COLOR: #09885a">2048</SPAN><SPAN 
style="COLOR: #000000">];</SPAN></DIV>
<DIV><SPAN style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;memset(tszMsgBuffer, 
</SPAN><SPAN style="COLOR: #a31515">'</SPAN><SPAN 
style="COLOR: #000000">\</SPAN><SPAN style="COLOR: #09885a">0</SPAN><SPAN 
style="COLOR: #a31515">'</SPAN><SPAN style="COLOR: #000000">, </SPAN><SPAN 
style="COLOR: #0000ff">sizeof</SPAN><SPAN 
style="COLOR: #000000">(tszMsgBuffer));</SPAN></DIV>
<DIV><SPAN style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN 
style="COLOR: #0000ff">if</SPAN><SPAN style="COLOR: #000000"> 
(OPenSsl_Server_RecvMsgEx(xhSSL, lpszClientAddr, tszMsgBuffer, &amp;nLen, 
lpszRecvMsg, nMsgLen))</SPAN></DIV>
<DIV><SPAN style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;{</SPAN></DIV>
<DIV><SPAN 
style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(</SPAN><SPAN 
style="COLOR: #a31515">"TCPSelect_CBRecv:%s\n"</SPAN><SPAN 
style="COLOR: #000000">, tszMsgBuffer);</SPAN></DIV>
<DIV><SPAN style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;}</SPAN></DIV>
<DIV><SPAN style="COLOR: #000000">}</SPAN></DIV>
<DIV><SPAN style="COLOR: #0000ff">void</SPAN><SPAN style="COLOR: #000000"> 
CALLBACK TCPSelect_CBLeave(LPCSTR lpszClientAddr, SOCKET hSocket, LPVOID 
lParam)</SPAN></DIV>
<DIV><SPAN style="COLOR: #000000">{</SPAN></DIV>
<DIV><SPAN style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;printf(</SPAN><SPAN 
style="COLOR: #a31515">"TCPSelect_CBLeave:%s\n"</SPAN><SPAN 
style="COLOR: #000000">, lpszClientAddr);</SPAN></DIV>
<DIV><SPAN style="COLOR: #000000">}</SPAN></DIV>
<DIV><SPAN style="COLOR: #0000ff">int</SPAN><SPAN style="COLOR: #000000"> 
main()</SPAN></DIV>
<DIV><SPAN style="COLOR: #000000">{</SPAN></DIV>
<DIV><SPAN style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;WSADATA 
st_WSAData;</SPAN></DIV>
<DIV><SPAN 
style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;WSAStartup(MAKEWORD(</SPAN><SPAN 
style="COLOR: #09885a">2</SPAN><SPAN style="COLOR: #000000">, </SPAN><SPAN 
style="COLOR: #09885a">2</SPAN><SPAN style="COLOR: #000000">), 
&amp;st_WSAData);</SPAN></DIV>
<DIV><SPAN style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN 
style="COLOR: #008000">//生成方式参考论坛</SPAN></DIV>
<DIV><SPAN style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;LPCTSTR lpszCAFile = 
_T(</SPAN><SPAN 
style="COLOR: #a31515">"H:\\XEngine_Apps\\Debug\\ca.crt"</SPAN><SPAN 
style="COLOR: #000000">);</SPAN></DIV>
<DIV><SPAN style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;LPCTSTR lpszSrvFile = 
_T(</SPAN><SPAN 
style="COLOR: #a31515">"H:\\XEngine_Apps\\Debug\\server.crt"</SPAN><SPAN 
style="COLOR: #000000">);</SPAN></DIV>
<DIV><SPAN style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;LPCTSTR lpszKeyFile = 
_T(</SPAN><SPAN 
style="COLOR: #a31515">"H:\\XEngine_Apps\\Debug\\server.key"</SPAN><SPAN 
style="COLOR: #000000">);</SPAN></DIV><BR>
<DIV><SPAN style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;xhSSL = 
OPenSsl_Server_InitEx(lpszCAFile, lpszSrvFile, lpszKeyFile, TRUE, 
FALSE);</SPAN></DIV>
<DIV><SPAN style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN 
style="COLOR: #0000ff">if</SPAN><SPAN style="COLOR: #000000"> (NULL == 
xhSSL)</SPAN></DIV>
<DIV><SPAN style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;{</SPAN></DIV>
<DIV><SPAN 
style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(</SPAN><SPAN 
style="COLOR: #a31515">"OPenSsl_Server_Init %lX\n"</SPAN><SPAN 
style="COLOR: #000000">, OPenSsl_GetLastError());</SPAN></DIV>
<DIV><SPAN 
style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN 
style="COLOR: #0000ff">return</SPAN><SPAN style="COLOR: #000000"> -</SPAN><SPAN 
style="COLOR: #09885a">1</SPAN><SPAN style="COLOR: #000000">;</SPAN></DIV>
<DIV><SPAN style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;}</SPAN></DIV>
<DIV><SPAN style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN 
style="COLOR: #0000ff">if</SPAN><SPAN style="COLOR: #000000"> 
(!NetCore_TCPSelect_Start(</SPAN><SPAN style="COLOR: #09885a">55443</SPAN><SPAN 
style="COLOR: #000000">))</SPAN></DIV>
<DIV><SPAN style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;{</SPAN></DIV>
<DIV><SPAN 
style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(</SPAN><SPAN 
style="COLOR: #a31515">"NetCore_TCPIocp_StartEx %lX\n"</SPAN><SPAN 
style="COLOR: #000000">, OPenSsl_GetLastError());</SPAN></DIV>
<DIV><SPAN 
style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN 
style="COLOR: #0000ff">return</SPAN><SPAN style="COLOR: #000000"> -</SPAN><SPAN 
style="COLOR: #09885a">1</SPAN><SPAN style="COLOR: #000000">;</SPAN></DIV>
<DIV><SPAN style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;}</SPAN></DIV>
<DIV><SPAN 
style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;NetCore_TCPSelect_SetCallBack(TCPSelect_CBLogin, 
TCPSelect_CBRecv, TCPSelect_CBLeave);</SPAN></DIV><BR>
<DIV><SPAN style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;printf(</SPAN><SPAN 
style="COLOR: #a31515">"ok\n"</SPAN><SPAN style="COLOR: #000000">);</SPAN></DIV>
<DIV><SPAN style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN 
style="COLOR: #0000ff">while</SPAN><SPAN style="COLOR: #000000"> (</SPAN><SPAN 
style="COLOR: #09885a">1</SPAN><SPAN style="COLOR: #000000">)</SPAN></DIV>
<DIV><SPAN style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;{</SPAN></DIV>
<DIV><SPAN 
style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sleep(</SPAN><SPAN 
style="COLOR: #09885a">1000</SPAN><SPAN style="COLOR: #000000">);</SPAN></DIV>
<DIV><SPAN style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;}</SPAN></DIV><BR>
<DIV><SPAN 
style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;NetCore_TCPSelect_Stop();</SPAN></DIV>
<DIV><SPAN 
style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;WSACleanup();</SPAN></DIV>
<DIV><SPAN style="COLOR: #000000">&nbsp;&nbsp;&nbsp;&nbsp;</SPAN><SPAN 
style="COLOR: #0000ff">return</SPAN><SPAN style="COLOR: #000000"> </SPAN><SPAN 
style="COLOR: #09885a">0</SPAN><SPAN style="COLOR: #000000">;</SPAN></DIV>
<DIV><SPAN style="COLOR: #000000">}</SPAN></DIV></DIV></body>
</html>
